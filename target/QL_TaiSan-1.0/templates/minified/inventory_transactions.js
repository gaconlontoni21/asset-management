import{getFormData as t}from"./common.js";function getSubTotalAndTotalFromRow(t){var o=parseFloat(t.find("input").eq(0).val()),a=parseInt(t.find("input").eq(1).val()),n=parseFloat(t.find("input").eq(2).val()),e=o*a;return[e,e+Math.round(e*n/100)]}function setSubTotalAndTotalToRow(t){var o=$(t),a=getSubTotalAndTotalFromRow(o);o.find("td").eq(-3).text(a[0]),o.find("td").eq(-2).text(a[1]-a[0]),o.find("td").eq(-1).text(a[1])}function getAllSubTotalAndTotal(){var t=[0,0];return $("body .modal table tbody tr:not(.emptyRow)").each(function(){var o=getSubTotalAndTotalFromRow($(this));t[0]+=o[0],t[1]+=o[1]}),t}function setSubTotalAndTotalToInput(t){$("#total").text(t[1]),$("#subTotal").text(t[0]),$("#vat").text(t[1]-t[0])}export function showModalCallback(){$("body").find(".modal .table tbody tr:not(.emptyRow)").each(function(){setSubTotalAndTotalToRow(this)}),setSubTotalAndTotalToInput(getAllSubTotalAndTotal())}export function addTableItemCallback(){setSubTotalAndTotalToRow($(".table").find("tr:not(.emptyRow)").last()),setSubTotalAndTotalToInput(getAllSubTotalAndTotal())}export function tableInputCallback(t){setSubTotalAndTotalToRow($(t).closest("tr")),setSubTotalAndTotalToInput(getAllSubTotalAndTotal())}export function deleteTableItemCallback(t){setSubTotalAndTotalToRow($(t.target.closest("tr"))),setSubTotalAndTotalToInput(getAllSubTotalAndTotal())}export function getData(){let o=t("#save-form");o.warehouseReceiverId=$('input[name="warehouseReceiverId"]').attr("data-value"),o.invoiceId=""===o.invoiceId?null:o.invoiceId;var a={inventoryTransactionDetailList:[]};return o.id=""===o.id?null:o.id,$(".modal .table tbody tr:not(.emptyRow)").each(function(){var t=$(this),n=t.find("button").attr("data-value"),e=t.find("input").eq(0).val(),l=t.find("input").eq(1).val(),i=t.find("input").eq(2).val();a.inventoryTransactionDetailList.push({inventoryTransactionId:o.id,assetId:n,quantity:l,price:e,VAT:i})}),o.inventoryTransactionDetailList=a.inventoryTransactionDetailList,o}